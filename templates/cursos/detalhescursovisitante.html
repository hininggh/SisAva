{% extends 'base.html' %}
{% block title %}Detalhes do Curso - Visitante{% endblock %}

{% block content %}
<div class="container mt-4">
    <h2>{{ curso.nome }}</h2>
    <p><strong>Inscrição:</strong> {{ curso.inscricao }}</p>
    <p><strong>Detalhes:</strong> {{ curso.detalhes }}</p>

    <!-- Botão para Gerar Relatório Geral -->
    <div class="btn-container mt-4">
        <a href="{% url 'gerar_relatorio_geral' curso.id %}" class="btn btn-secondary">Gerar Relatório Geral</a>
    </div>

    <!-- Indicadores do Curso -->
    <div class="minimizable mt-4">
        <h3>Indicadores por Dimensão</h3>
        {% for dimensao, dados in indicadores_por_dimensao.items %}
            <div class="minimizable-content">
                <h4>{{ dimensao }}</h4>
                <ul>
                    {% for indicador in dados.indicadores_man %}
                        <li class="indicador-info">
                            <a href="{% url 'visualizar_indicador' curso.id indicador.id %}">
                                {{ indicador.indicador_info.nome }}
                            </a>
                            {% if indicador.conteudo %}
                                <a href="{% url 'baixar_relatorio' curso.id indicador.id %}" class="btn btn-sm btn-primary">
                                    Baixar Relatório
                                </a>
                            {% endif %}
                        </li>
                    {% endfor %}
                </ul>
            </div>
        {% endfor %}
    </div>

    <!-- Informações Complementares -->
    <div class="minimizable mt-4">
        <h3>Informações Complementares</h3>
        <div>
            <p>{{ curso.informacoes_complementares|default:"Sem informações complementares" }}</p>
        </div>
    </div>
</div>
{% endblock %}
