{% extends 'base.html' %}

{% block title %}Detalhes do Indicador - Visitante{% endblock %}

{% block content %}
<div class="container mt-4">
    <!-- Botão Voltar ao Curso -->
    <div style="margin-bottom: 20px;">
        <a href="{% url 'visualizar_curso' curso.id %}" class="btn btn-secondary">Voltar ao Curso</a>
    </div>

    <!-- Nome e status do Indicador -->
    <h1>{{ indicador.indicador_info.nome }}</h1>
    {% if indicador.NSA %}
        <p>-NSA-</p>
    {% endif %}
    <p>{{ indicador.indicador_info.mensagem_aviso }}</p>

    <!-- Verificar se há um relatório disponível para download -->
    <div style="margin-top: 20px;">
        {% if indicador.conteudo %}
            <p><strong>Relatório:</strong> {{ indicador.conteudo.name }}</p>
            <p><strong>Data de Envio:</strong> {{ indicador.data_envio }}</p>
            <p><strong>Usuário que enviou:</strong> {{ indicador.usuario_relatorio.nome }}</p>

            <!-- Ícone de download apenas -->
            <a href="{% url 'baixar_relatorio' curso.id indicador.indicador_info.id %}">
                <img class="icon" src="{% static 'icons/download.png' %}" alt="Baixar" style="width: 20px;">
            </a>
        {% else %}
            <p><strong>Relatório:</strong> Não há relatório anexado.</p>
        {% endif %}
    </div>

    <!-- Tabela de Conceitos -->
    <h3>Tabela de Conceitos</h3>
    <table style="width: 100%; border-collapse: collapse; margin-top: 15px;">
        <tr>
            <th style="border: 1px solid #000; padding: 8px; background-color: #f2f2f2;">Conceito</th>
            <th style="border: 1px solid #000; padding: 8px; background-color: #f2f2f2;">Critério de Análise</th>
        </tr>
        {% for conceito, criterio in tabela_conceitos.items %}
            <tr>
                <td style="border: 1px solid #000; padding: 8px; text-align: center;">{{ conceito }}</td>
                <td style="border: 1px solid #000; padding: 8px;">{{ criterio }}</td>
            </tr>
        {% endfor %}
    </table>
</div>
{% endblock %}
